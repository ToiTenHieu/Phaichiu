{% extends "basee.html" %}
{% block content %}
<!-- Overlay ch·∫∑n t√°c v·ª• kh√°c -->
<div id="overlay" class="fixed inset-0 bg-black bg-opacity-30 z-40"></div>

<!-- Qu·∫£n L√Ω S√°ch Section -->
<div id="lockedContent" class="locked">
  {% include "accounts/managebook.html" %}
  {% include "accounts/manageBorrow.html" %}
  {% include "accounts/bookstatistics.html" %}
</div>

<!-- Giao di·ªán Ch·ªânh S·ª≠a Ng∆∞·ªùi D√πng -->
<div
  id="quanLyNguoiDung"
  class="section bg-white rounded-2xl shadow-lg p-6 mb-6 card-hover transition-all duration-300 relative z-50"
>
  <!-- Header -->
  <div class="bg-gradient-to-r from-blue-500 to-purple-500 p-4 rounded-t-2xl -mx-6 -mt-6 mb-6 flex items-center justify-between">
    <h2 class="text-white font-bold text-lg flex items-center gap-2">
      üë§ Ch·ªânh S·ª≠a Ng∆∞·ªùi D√πng
    </h2>
  </div>

  <!-- Form -->
  <form method="POST" class="space-y-4">
    {% csrf_token %}

    <div>
      <label class="block text-gray-700 font-medium mb-1">T√™n ƒë·∫ßy ƒë·ªß</label>
      <input type="text" name="name" value="{{ user.name }}" 
             class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-purple-400"/>
    </div>

    <div>
      <label class="block text-gray-700 font-medium mb-1">ƒêi·ªán tho·∫°i</label>
      <input type="text" name="phone" value="{{ user.phone }}" 
             class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-purple-400"/>
    </div>

    <div>
      <label class="block text-gray-700 font-medium mb-1">ƒê·ªãa ch·ªâ</label>
      <input type="text" name="address" value="{{ user.address }}" 
             class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-purple-400"/>
    </div>

    <div>
      <label class="block text-gray-700 font-medium mb-1">Ng√†y sinh</label>
      <input type="date" name="date_of_birth" value="{{ user.date_of_birth|date:'Y-m-d' }}" 
             class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-purple-400"/>
    </div>

    <div>
      <label class="block text-gray-700 font-medium mb-1">Gi·ªõi t√≠nh</label>
      <select name="gender" 
              class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-purple-400">
        <option value="male" {% if user.gender == 'male' %}selected{% endif %}>Nam</option>
        <option value="female" {% if user.gender == 'female' %}selected{% endif %}>N·ªØ</option>
      </select>
    </div>

    <!-- N√∫t -->
    <div class="flex justify-end gap-3 pt-4">
      <button type="submit" 
              class="px-5 py-2 rounded-lg bg-gradient-to-r from-purple-500 to-blue-500 text-white font-medium hover:opacity-90"
              onclick="unlockPage()">
        ‚úî L∆∞u
      </button>
      <a href="{% url 'librarian_dashboard' %}?section=quanLyNguoiDung"
         class="px-5 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white font-medium"
         onclick="unlockPage()">
        ‚úñ Hu·ª∑
      </a>
    </div>
  </form>
</div>

<style>
/* Kh√≥a to√†n b·ªô ph·∫ßn kh√°c */
.locked {
  pointer-events: none;
  opacity: 0.4;
}
</style>

<script>
function unlockPage() {
  // B·ªè overlay v√† cho ph√©p click c√°c ph·∫ßn kh√°c
  document.getElementById("overlay").remove();
  document.getElementById("lockedContent").classList.remove("locked");
}
</script>
{% endblock %}
